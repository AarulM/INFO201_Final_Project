---
title: "AI_Analysis"
author: "Aarul"
date: "2025-11-27"
output: html_document
---

## Collaborators: Aarul Motiani, Eshaan Garg, Wayne Zhao, Finn Caughie

================================================================================
## AARUL'S RESEARCH QUESTION: How has demand for AI-related roles grown over the past 5 years?

## Loading libraries and datasets
```{r}
library(tidyverse)
library(ggplot2)
library(lubridate)

## Aarul's computer loaded datasets
job_postings <- read_delim("/Users/Aarul/UW/INFO 201/Final Project/INFO201_Final_Project/AI_Job_Posting_Trends.csv")
salary_data <- read_delim("/Users/Aarul/UW/INFO 201/Final Project/INFO201_Final_Project/data_science_salaries.csv")
```
## Data exploration for Aarul's datasets
```{r}
head(job_postings)
names(job_postings)
nrow(job_postings)
ncol(job_postings)


head(salary_data)
names(salary_data)
nrow(salary_data)
ncol(salary_data)
```

## Dataset 1 (job_postings) cleaning and organizing
```{r}
job_postings_clean <- job_postings %>%
  mutate(posting_date = as.Date(posting_date, format = "%m/%d/%y")) %>%
  filter(!is.na(posting_date)) %>%
  distinct()
head(job_postings_clean)
```

## Dataset 2 (market_insights) cleaning and filtering data
```{r}
salary_data_clean <- salary_data %>%
  filter(work_year >= 2020) %>%
  filter(work_year <= 2023) %>%
  filter(!is.na(salary_in_usd)) %>%
  distinct()
head(salary_data_clean)

```

## Grouping and summary statistics for job postings per year
```{r}
jobs_per_year <- job_postings_clean %>%
  mutate(year = format(posting_date, "%Y")) %>%
  group_by(year) %>%
  summarize(job_count = n())
head(jobs_per_year)
```

## Grouping and adding columnn for average salary per year calculation
```{r}
salary_per_year <- salary_data_clean %>%
  rename(year = work_year) %>%
  mutate(year = as.character(year)) %>%
  group_by(year) %>%
  summarize(avg_salary = mean(salary_in_usd), median_salary = median(salary_in_usd))

head(salary_per_year)
```

## Creating numerical variables for data analysis (using lag function)
```{r}
salary_per_year <- salary_per_year %>%
  mutate(salary_category = "AI/Data Science") %>%
  arrange(year) %>%
  mutate(prev_salary = lag(avg_salary), salary_growth_rate = (avg_salary - prev_salary) / prev_salary * 100)

print(salary_per_year)
```


## Merging both the datasets
```{r}
merged <- jobs_per_year %>%
  left_join(salary_per_year, by = "year")

head(merged)
```


## Research question data analysis to calculate salary growth
```{r}
first_year <- salary_per_year %>% filter(year == "2020")
last_year <- salary_per_year %>% filter(year == "2023")
total_salary_growth <- ((last_year$avg_salary - first_year$avg_salary) / first_year$avg_salary) * 100
```

## Company size grouping and evaluation
```{r}
company_summary <- job_postings_clean %>%
  group_by(company_size) %>%
  summarize(total_jobs = n())

print(company_summary)
```

## Visualizations
```{r}
salary_per_year %>% 
ggplot(aes(x = as.numeric(year), y = avg_salary)) +
  geom_line(size = 1.5, color = "darkblue") +
  geom_point(size = 5, color = "red") +
  labs(
    title = "Average AI Job Salary Growth (2020-2023)",
    x = "Year",
    y = "Average Salary (USD)"
  )
```

```{r}
ggplot(company_summary, aes(x = company_size, y = total_jobs, group = 1)) +
  geom_line(size = 1.5, color = "darkblue") +
  geom_point(size = 5, color = "red") +
  labs(
    title = "AI Job Postings by Company Size (2020-2023)",
    x = "Company Size",
    y = "Number of Job Postings"
  ) 
```

================================================================================
## FINN'S RESEARCH QUESTION: Which industries have experienced the greatest increase in AI-related job openings?
## Finn, put whatever code u have written here


#Loading and checking data
```{r}
insights <- read_delim("ai_job_market_insights.csv")
head(insights)
```


```{r}
trends <- read_delim("AI_Job_Posting_Trends.csv")
head(trends)
```

#Cleaning the data 
```{r}
insights_clean <- insights %>%
  distinct()

trends_clean <- trends %>%
  mutate(posting_date = as.Date(posting_date, format = "%m/%d/%y")) %>%
  distinct()
```

#Updating data so I can use it for merging and graphing
```{r}
trends_per_month <- trends_clean %>%
  mutate(year = format(posting_date, "%Y"), month = format(posting_date, "%m")) %>%
  group_by(industry, year, month) %>%
  summarize(postings_count = n()) #counts number of rows per group
```

```{r}
industry_increase <- trends_per_month %>%
  group_by(industry) %>%
  summarize(first = first(postings_count), last = last(postings_count), increase = last - first) %>%
  arrange(desc(increase))
```

```{r}
head(trends_per_month)
head(industry_increase)
```

#Merging the data
```{r}
merged <- merge(industry_increase, trends_per_month, by = "industry")
head(merged)
```

```{r}
merged <- merged %>%
  arrange(desc(increase))

```

#This graph shows the job postings for the top 5 growing industries over the years
```{r}
yearly_increase <- merged %>%
  group_by(industry, year) %>%
  summarize(yearly_total = sum(postings_count)) %>%
  arrange(industry, year)

top5 <- merged %>%
  distinct(industry, increase) %>%
  arrange(desc(increase)) %>%
  slice(1:5) %>%
  pull(industry)

yearly_increase_top5 <- yearly_increase %>%
  filter(industry %in% top5)

ggplot(yearly_increase_top5, aes(x = as.numeric(year), y = yearly_total, color = industry)) +
  geom_line(linewidth = 1.1) +
  labs(
    title = "AI Job Postings for Top 5 Growing Industries Per Year",
    x = "Year",
    y = "Number of Postings"
  )
```


#This graph uses merged data to show increase of AI job postings by industry per year 
```{r}
ggplot(merged, aes(x = industry, y = increase, fill = industry)) +
  geom_col() +
  coord_flip() +
  labs(
    title = "Increase in AI Job Postings by Industry",
    x = "Industry",
    y = "Increase in Job Postings"
  )
```


================================================================================
## WAYNE'S RESEARCH QUESTION: How has AI-related hiring shifted in non-tech sectors?
## Wayne, decide what code u need here and remove what you're not using

```{r}
market_insights <- read_delim("./ai_job_market_insights.csv")
```

```{r}
lowercase_clean <- function(df) {
  names(df) <- tolower(names(df))
  df
}

job_postings <- job_postings %>%
  rename(location = company_location)

market_insights <- lowercase_clean(market_insights)

names(job_postings)
names(market_insights)

merged_data <- job_postings %>%
  left_join(market_insights, by = "job_title", relationship = "many-to-many")

merged_data <- merged_data %>%
  select(-ends_with(".y"))

merged_data <- merged_data %>%
  mutate(
    remote_friendly = ifelse(remote_category == "Fully Remote", "Yes", remote_friendly),
    remote_friendly = ifelse(remote_category == "On-site", "No", remote_friendly),
    remote_friendly = ifelse(remote_category == "Hybrid", "Hybrid", remote_friendly)
      )

merged_data
```

## columns needed for Q3
```{r}
job_postings %>%
  select(industry, posting_date, job_title, salary_usd, company_size, company_location, required_skills)

market_insights %>%
  select(industry, ai_adoption_level, automation_risk, job_growth_projection, salary_usd, required_skills, job_title)
```

```{r}
market_insights <- market_insights %>%
  mutate(
    company_size = ifelse(company_size == "Small", "S", company_size),
    company_size = ifelse(company_size == "Medium", "M", company_size),
    company_size = ifelse(company_size == "Large", "L", company_size)
    ) %>%
  mutate()

market_insights
job_postings

```


================================================================================
## ESHAAN'S RESEARCH QUESTION: What countries are leading in AI job growth relative to GDP or population?







